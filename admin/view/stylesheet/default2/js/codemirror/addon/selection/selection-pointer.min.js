!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){var r=e.state.selectionPointer;(null==t.buttons?t.which:t.buttons)?r.mouseX=r.mouseY=null:(r.mouseX=t.clientX,r.mouseY=t.clientY),i(e)}function r(e,t){if(!e.getWrapperElement().contains(t.relatedTarget)){var r=e.state.selectionPointer;r.mouseX=r.mouseY=null,i(e)}}function n(e){e.state.selectionPointer.rects=null,i(e)}function i(e){e.state.selectionPointer.willUpdate||(e.state.selectionPointer.willUpdate=!0,setTimeout(function(){o(e),e.state.selectionPointer.willUpdate=!1},50))}function o(e){var t=e.state.selectionPointer;if(t){if(null==t.rects&&null!=t.mouseX&&(t.rects=[],e.somethingSelected()))for(var r=e.display.selectionDiv.firstChild;r;r=r.nextSibling)t.rects.push(r.getBoundingClientRect());var n=!1;if(null!=t.mouseX)for(var i=0;i<t.rects.length;i++){var o=t.rects[i];o.left<=t.mouseX&&o.right>=t.mouseX&&o.top<=t.mouseY&&o.bottom>=t.mouseY&&(n=!0)}var l=n?t.value:"";e.display.lineDiv.style.cursor!=l&&(e.display.lineDiv.style.cursor=l)}}e.defineOption("selectionPointer",!1,function(i,o){var l=i.state.selectionPointer;l&&(e.off(i.getWrapperElement(),"mousemove",l.mousemove),e.off(i.getWrapperElement(),"mouseout",l.mouseout),e.off(window,"scroll",l.windowScroll),i.off("cursorActivity",n),i.off("scroll",n),i.state.selectionPointer=null,i.display.lineDiv.style.cursor=""),o&&(l=i.state.selectionPointer={value:"string"==typeof o?o:"default",mousemove:function(e){t(i,e)},mouseout:function(e){r(i,e)},windowScroll:function(){n(i)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},e.on(i.getWrapperElement(),"mousemove",l.mousemove),e.on(i.getWrapperElement(),"mouseout",l.mouseout),e.on(window,"scroll",l.windowScroll),i.on("cursorActivity",n),i.on("scroll",n))})});